{"remainingRequest":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\src\\views\\face\\face.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\src\\views\\face\\face.vue","mtime":1704763808899},{"path":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\babel.config.js","mtime":1666679180000},{"path":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715100000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8gaW1wb3J0ICogYXMgZmFjZWFwaSBmcm9tICdodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2ZhY2UtYXBpLmpzJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRmFjZVJlY29nbml0aW9uJywKICBtb3VudGVkKCkgewogICAgdGhpcy5zdGFydFZpZGVvKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBzdGFydFZpZGVvKCkgewogICAgICB0cnkgewogICAgICAgIGF3YWl0IGZhY2VhcGkubmV0cy50aW55RmFjZURldGVjdG9yLmxvYWRGcm9tVXJpKCcvbW9kZWxzJyk7CiAgICAgICAgLy8g5Yqg6L295YW25LuW5b+F6KaB55qE5qih5Z6LCiAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoewogICAgICAgICAgdmlkZW86IHt9CiAgICAgICAgfSkudGhlbihzdHJlYW0gPT4gewogICAgICAgICAgdGhpcy4kcmVmcy52aWRlby5zcmNPYmplY3QgPSBzdHJlYW07CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5kZXRlY3RGYWNlcygpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgZGV0ZWN0RmFjZXMoKSB7CiAgICAgIGNvbnN0IHZpZGVvID0gdGhpcy4kcmVmcy52aWRlbzsKICAgICAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigncGxheScsIGFzeW5jICgpID0+IHsKICAgICAgICBjb25zdCBjYW52YXMgPSBmYWNlYXBpLmNyZWF0ZUNhbnZhc0Zyb21NZWRpYSh2aWRlbyk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoY2FudmFzKTsKICAgICAgICBjb25zdCBkaXNwbGF5U2l6ZSA9IHsKICAgICAgICAgIHdpZHRoOiB2aWRlby53aWR0aCwKICAgICAgICAgIGhlaWdodDogdmlkZW8uaGVpZ2h0CiAgICAgICAgfTsKICAgICAgICBmYWNlYXBpLm1hdGNoRGltZW5zaW9ucyhjYW52YXMsIGRpc3BsYXlTaXplKTsKICAgICAgICBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7CiAgICAgICAgICBjb25zdCBkZXRlY3Rpb25zID0gYXdhaXQgZmFjZWFwaS5kZXRlY3RBbGxGYWNlcyh2aWRlbywgbmV3IGZhY2VhcGkuVGlueUZhY2VEZXRlY3Rvck9wdGlvbnMoKSk7CiAgICAgICAgICBjb25zdCByZXNpemVkRGV0ZWN0aW9ucyA9IGZhY2VhcGkucmVzaXplUmVzdWx0cyhkZXRlY3Rpb25zLCBkaXNwbGF5U2l6ZSk7CiAgICAgICAgICBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKS5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgIGZhY2VhcGkuZHJhdy5kcmF3RGV0ZWN0aW9ucyhjYW52YXMsIHJlc2l6ZWREZXRlY3Rpb25zKTsKICAgICAgICB9LCAxMDApOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":"AAQA;;AAEA;EACAA;EACAC;IACA;EACA;EACAC;IACA;MACA;QACA;QACA;QACAC;UAAAC;QAAA,GACAC;UACA;QACA;QACA;MACA;QACAC;MACA;IACA;IACA;MACA;MACAF;QACA;QACAG;QACA;UAAAC;UAAAC;QAAA;QACAC;QACAC;UACA;UACA;UACAC;UACAF;QACA;MACA;IACA;EACA;AACA","names":["name","mounted","methods","navigator","video","then","console","document","width","height","faceapi","setInterval","canvas"],"sourceRoot":"src/views/face","sources":["face.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <video ref=\"video\" width=\"720\" height=\"560\" autoplay muted></video>\r\n    <canvas ref=\"canvas\" width=\"720\" height=\"560\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import * as faceapi from 'https://cdn.jsdelivr.net/npm/face-api.js';\r\n\r\nexport default {\r\n  name: 'FaceRecognition',\r\n  mounted() {\r\n    this.startVideo();\r\n  },\r\n  methods: {\r\n    async startVideo() {\r\n      try {\r\n        await faceapi.nets.tinyFaceDetector.loadFromUri('/models');\r\n        // 加载其他必要的模型\r\n        navigator.mediaDevices.getUserMedia({ video: {} })\r\n            .then((stream) => {\r\n              this.$refs.video.srcObject = stream;\r\n            });\r\n        this.detectFaces();\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n    async detectFaces() {\r\n      const video = this.$refs.video;\r\n      video.addEventListener('play', async () => {\r\n        const canvas = faceapi.createCanvasFromMedia(video);\r\n        document.body.append(canvas);\r\n        const displaySize = { width: video.width, height: video.height };\r\n        faceapi.matchDimensions(canvas, displaySize);\r\n        setInterval(async () => {\r\n          const detections = await faceapi.detectAllFaces(video, new faceapi.TinyFaceDetectorOptions());\r\n          const resizedDetections = faceapi.resizeResults(detections, displaySize);\r\n          canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\r\n          faceapi.draw.drawDetections(canvas, resizedDetections);\r\n        }, 100);\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"]}]}