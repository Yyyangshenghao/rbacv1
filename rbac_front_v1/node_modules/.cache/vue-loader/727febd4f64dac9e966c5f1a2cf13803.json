{"remainingRequest":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\src\\views\\face\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\src\\views\\face\\index.vue","mtime":1705000813506},{"path":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715100000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJDYW1lcmFDb21wb25lbnQiLA0KICBkYXRhKCl7DQogICAgcmV0dXJuIHsNCiAgICAgIGVtcGxveWVlSWQ6IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VySWQiKQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIHNldHVwQ2FtZXJhKCkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoeyB2aWRlbzogdHJ1ZSB9KTsNCiAgICAgICAgdGhpcy4kcmVmcy52aWRlby5zcmNPYmplY3QgPSBzdHJlYW07DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhY2Nlc3NpbmcgdGhlIGNhbWVyYTonLCBlcnJvcik7DQogICAgICB9DQogICAgfSwNCiAgICBjYXB0dXJlQW5kUHJvY2Vzc0ltYWdlKCkgew0KICAgICAgY29uc3QgY2FudmFzID0gdGhpcy4kcmVmcy5jYW52YXM7DQogICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7DQogICAgICBjb25zdCB2aWRlbyA9IHRoaXMuJHJlZnMudmlkZW87DQogICAgICBjb250ZXh0LmRyYXdJbWFnZSh2aWRlbywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsNCg0KICAgICAgLy8g5bCG5Zu+5YOP6L2s5o2i5Li6QmFzZTY057yW56CB55qE5a2X56ym5LiyDQogICAgICBsZXQgYmFzZTY0SW1hZ2UgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTsNCiAgICAgIC8vIOWOu+mZpEJhc2U2NOWtl+espuS4suS4reeahOWJjee8gA0KICAgICAgYmFzZTY0SW1hZ2UgPSBiYXNlNjRJbWFnZS5yZXBsYWNlKC9eZGF0YTppbWFnZVwvcG5nO2Jhc2U2NCwvLCAnJyk7DQogICAgICBjb25zb2xlLmxvZyhiYXNlNjRJbWFnZSk7IC8vIOaJk+WNsOWIsOaOp+WItuWPsOaIluWPkemAgeWIsOWQjuerrw0KDQogICAgICB0aGlzLnNlbmRJbWFnZVRvQmFja2VuZChiYXNlNjRJbWFnZSk7DQoNCiAgICB9LA0KICAgIGFzeW5jIHNlbmRJbWFnZVRvQmFja2VuZChiYXNlNjRJbWFnZSkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHsNCiAgICAgICAgICBiYXNlNjRJbWFnZTogYmFzZTY0SW1hZ2UsDQogICAgICAgICAgZW1wbG95ZWVJZDogdGhpcy5lbXBsb3llZUlkLA0KICAgICAgICAgIC8vIOWPr+S7pea3u+WKoOWFtuS7lumcgOimgeeahOaVsOaNrg0KICAgICAgICB9Ow0KICAgICAgICBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJy91cGxvYWQtaW1hZ2UnLCBwYXlsb2FkKTsNCiAgICAgICAgY29uc29sZS5sb2coJ0ltYWdlIHNlbnQgdG8gYmFja2VuZCBzdWNjZXNzZnVsbHknKTsNCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgdGhlIGltYWdlIHRvIGJhY2tlbmQ6JywgZXJyb3IpOw0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLnNldHVwQ2FtZXJhKCk7DQogIH0NCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/face","sourcesContent":["<template>\r\n  <div class=\"camera\">\r\n    <video ref=\"video\" width=\"640\" height=\"480\" autoplay></video>\r\n    <button @click=\"captureAndProcessImage\">拍照并处理</button>\r\n    <canvas ref=\"canvas\" width=\"640\" height=\"480\" style=\"display: none;\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"CameraComponent\",\r\n  data(){\r\n    return {\r\n      employeeId: window.sessionStorage.getItem(\"userId\")\r\n    }\r\n  },\r\n  methods: {\r\n    async setupCamera() {\r\n      try {\r\n        const stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n        this.$refs.video.srcObject = stream;\r\n      } catch (error) {\r\n        console.error('Error accessing the camera:', error);\r\n      }\r\n    },\r\n    captureAndProcessImage() {\r\n      const canvas = this.$refs.canvas;\r\n      const context = canvas.getContext('2d');\r\n      const video = this.$refs.video;\r\n      context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n\r\n      // 将图像转换为Base64编码的字符串\r\n      let base64Image = canvas.toDataURL('image/png');\r\n      // 去除Base64字符串中的前缀\r\n      base64Image = base64Image.replace(/^data:image\\/png;base64,/, '');\r\n      console.log(base64Image); // 打印到控制台或发送到后端\r\n\r\n      this.sendImageToBackend(base64Image);\r\n\r\n    },\r\n    async sendImageToBackend(base64Image) {\r\n      try {\r\n        const payload = {\r\n          base64Image: base64Image,\r\n          employeeId: this.employeeId,\r\n          // 可以添加其他需要的数据\r\n        };\r\n        await this.$http.post('/upload-image', payload);\r\n        console.log('Image sent to backend successfully');\r\n      } catch (error) {\r\n        console.error('Error sending the image to backend:', error);\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.setupCamera();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.camera {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n</style>\r\n"]}]}