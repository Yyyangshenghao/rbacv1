{"remainingRequest":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\src\\views\\face\\face.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\src\\views\\face\\face.vue","mtime":1704763808899},{"path":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\24711\\Desktop\\07-RBAC\\代码\\rbacv1\\rbac_front_v1\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715100000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQovLyBpbXBvcnQgKiBhcyBmYWNlYXBpIGZyb20gJ2h0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vZmFjZS1hcGkuanMnOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdGYWNlUmVjb2duaXRpb24nLA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuc3RhcnRWaWRlbygpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgc3RhcnRWaWRlbygpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGF3YWl0IGZhY2VhcGkubmV0cy50aW55RmFjZURldGVjdG9yLmxvYWRGcm9tVXJpKCcvbW9kZWxzJyk7DQogICAgICAgIC8vIOWKoOi9veWFtuS7luW/heimgeeahOaooeWeiw0KICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7IHZpZGVvOiB7fSB9KQ0KICAgICAgICAgICAgLnRoZW4oKHN0cmVhbSkgPT4gew0KICAgICAgICAgICAgICB0aGlzLiRyZWZzLnZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB0aGlzLmRldGVjdEZhY2VzKCk7DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIGRldGVjdEZhY2VzKCkgew0KICAgICAgY29uc3QgdmlkZW8gPSB0aGlzLiRyZWZzLnZpZGVvOw0KICAgICAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigncGxheScsIGFzeW5jICgpID0+IHsNCiAgICAgICAgY29uc3QgY2FudmFzID0gZmFjZWFwaS5jcmVhdGVDYW52YXNGcm9tTWVkaWEodmlkZW8pOw0KICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChjYW52YXMpOw0KICAgICAgICBjb25zdCBkaXNwbGF5U2l6ZSA9IHsgd2lkdGg6IHZpZGVvLndpZHRoLCBoZWlnaHQ6IHZpZGVvLmhlaWdodCB9Ow0KICAgICAgICBmYWNlYXBpLm1hdGNoRGltZW5zaW9ucyhjYW52YXMsIGRpc3BsYXlTaXplKTsNCiAgICAgICAgc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4gew0KICAgICAgICAgIGNvbnN0IGRldGVjdGlvbnMgPSBhd2FpdCBmYWNlYXBpLmRldGVjdEFsbEZhY2VzKHZpZGVvLCBuZXcgZmFjZWFwaS5UaW55RmFjZURldGVjdG9yT3B0aW9ucygpKTsNCiAgICAgICAgICBjb25zdCByZXNpemVkRGV0ZWN0aW9ucyA9IGZhY2VhcGkucmVzaXplUmVzdWx0cyhkZXRlY3Rpb25zLCBkaXNwbGF5U2l6ZSk7DQogICAgICAgICAgY2FudmFzLmdldENvbnRleHQoJzJkJykuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7DQogICAgICAgICAgZmFjZWFwaS5kcmF3LmRyYXdEZXRlY3Rpb25zKGNhbnZhcywgcmVzaXplZERldGVjdGlvbnMpOw0KICAgICAgICB9LCAxMDApOw0KICAgICAgfSk7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["face.vue"],"names":[],"mappings":";AAQA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"face.vue","sourceRoot":"src/views/face","sourcesContent":["<template>\r\n  <div>\r\n    <video ref=\"video\" width=\"720\" height=\"560\" autoplay muted></video>\r\n    <canvas ref=\"canvas\" width=\"720\" height=\"560\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import * as faceapi from 'https://cdn.jsdelivr.net/npm/face-api.js';\r\n\r\nexport default {\r\n  name: 'FaceRecognition',\r\n  mounted() {\r\n    this.startVideo();\r\n  },\r\n  methods: {\r\n    async startVideo() {\r\n      try {\r\n        await faceapi.nets.tinyFaceDetector.loadFromUri('/models');\r\n        // 加载其他必要的模型\r\n        navigator.mediaDevices.getUserMedia({ video: {} })\r\n            .then((stream) => {\r\n              this.$refs.video.srcObject = stream;\r\n            });\r\n        this.detectFaces();\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n    async detectFaces() {\r\n      const video = this.$refs.video;\r\n      video.addEventListener('play', async () => {\r\n        const canvas = faceapi.createCanvasFromMedia(video);\r\n        document.body.append(canvas);\r\n        const displaySize = { width: video.width, height: video.height };\r\n        faceapi.matchDimensions(canvas, displaySize);\r\n        setInterval(async () => {\r\n          const detections = await faceapi.detectAllFaces(video, new faceapi.TinyFaceDetectorOptions());\r\n          const resizedDetections = faceapi.resizeResults(detections, displaySize);\r\n          canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\r\n          faceapi.draw.drawDetections(canvas, resizedDetections);\r\n        }, 100);\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"]}]}